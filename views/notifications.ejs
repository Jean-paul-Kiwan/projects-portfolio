<div class="tasks-page-header">
  <h1 class="tasks-title">Notifications</h1>
  <p class="tasks-subtitle">
    Invitations and activity about your workspaces and tasks.
  </p>
</div>

<div class="row mt-4">
  <div class="col-md-6 mb-4">
    <h2 class="section-title mb-3">Invitations</h2>

    <% if (!pendingInvites.length) { %>
      <p class="empty-text">No pending invitations.</p>
    <% } %>

    <% pendingInvites.forEach(inv => { %>
      <div class="notification-card mb-3">
        <p class="mb-1">
          <strong><%= inv.inviter_name %></strong> invited you to join
          <strong><%= inv.workspace_name %></strong>.
        </p>
        <p class="notification-time small text-muted">
          Sent at <%= inv.created_at %>
        </p>
        <div class="d-flex gap-2 mt-2">
          <form method="POST" action="/invitations/<%= inv.id %>/accept">
            <button class="btn btn-sm btn-success" type="submit">
              Accept
            </button>
          </form>
          <form method="POST" action="/invitations/<%= inv.id %>/reject">
            <button class="btn btn-sm btn-danger" type="submit">
              Reject
            </button>
          </form>
        </div>
      </div>
    <% }) %>
  </div>

  <div class="col-md-6 mb-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="section-title mb-0">Activity</h2>
      <form method="POST" action="/notifications/read-all">
        <button class="btn btn-sm btn-outline-light" type="submit">
          Mark all as read
        </button>
      </form>
    </div>

    <% if (!notifications.length) { %>
      <p class="empty-text">No notifications yet.</p>
    <% } %>

    <% notifications.forEach(n => { %>
      <div class="notification-card mb-3 <%= n.is_read ? 'notification-read' : 'notification-unread' %>">
        <p class="mb-1"><%= n.message %></p>
        <p class="notification-time small text-muted">
          <%= n.created_at %>
        </p>

        <% if (!n.is_read) { %>
          <form method="POST" action="/notifications/<%= n.id %>/read">
            <button class="btn btn-sm btn-outline-info" type="submit">
              Mark as read
            </button>
          </form>
        <% } %>
      </div>
    <% }) %>
  </div>
</div>
